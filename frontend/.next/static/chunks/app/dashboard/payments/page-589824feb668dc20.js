(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8996],{9767:function(e,t,r){Promise.resolve().then(r.bind(r,22))},22:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var s=r(7437),n=r(2265),a=r(6070),l=r(5974),i=r(2934),c=r(1723),d=r(9388);let o=(0,r(9205).Z)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var u=r(8226),x=r(9179);function m(){let{user:e}=(0,x.a)(),[t,r]=(0,n.useState)([]),[m,f]=(0,n.useState)(!0);(0,n.useEffect)(()=>{e&&h()},[e]);let h=async()=>{if(e)try{f(!0);let t=await fetch("".concat("https://enroll-repair.preview.emergentagent.com","/payments/history/").concat(e.id)),s=await t.json();r(s)}catch(e){console.error("Error loading payments:",e)}finally{f(!1)}},y=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}),p=e=>{let t={succeeded:{color:"bg-green-100 text-green-800",icon:i.Z,text:"Succeeded"},pending:{color:"bg-yellow-100 text-yellow-800",icon:c.Z,text:"Pending"},failed:{color:"bg-red-100 text-red-800",icon:d.Z,text:"Failed"}},r=t[e]||t.pending,n=r.icon;return(0,s.jsxs)(l.C,{className:r.color,children:[(0,s.jsx)(n,{className:"w-3 h-3 mr-1"}),r.text]})};return m?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,s.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,s.jsx)("div",{className:"h-10 bg-gray-200 rounded w-1/3"}),[1,2,3].map(e=>(0,s.jsx)("div",{className:"h-24 bg-gray-200 rounded"},e))]})})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto px-8 py-12",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)(o,{className:"w-10 h-10"}),(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"Payment History"})]}),(0,s.jsx)("p",{className:"text-xl text-white/90",children:"View all your transaction history"})]})}),(0,s.jsxs)("div",{className:"max-w-5xl mx-auto px-8 py-8",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsx)(a.Zb,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Spent"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["$",t.filter(e=>"succeeded"===e.status).reduce((e,t)=>e+t.amount,0).toFixed(2)]})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(u.Z,{className:"w-6 h-6 text-green-600"})})]})}),(0,s.jsx)(a.Zb,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Payments"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:t.length})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(o,{className:"w-6 h-6 text-blue-600"})})]})}),(0,s.jsx)(a.Zb,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Successful"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:t.filter(e=>"succeeded"===e.status).length})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(i.Z,{className:"w-6 h-6 text-green-600"})})]})})]}),0===t.length?(0,s.jsxs)(a.Zb,{className:"p-12 text-center",children:[(0,s.jsx)(u.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No payment history yet"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Your payment transactions will appear here"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"All Transactions"}),t.map(e=>{var t;return(0,s.jsx)(a.Zb,{className:"p-6 hover:shadow-md transition-shadow",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-6 flex-1",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(u.Z,{className:"w-6 h-6 text-indigo-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h3",{className:"font-bold text-gray-900",children:(null===(t=e.courses)||void 0===t?void 0:t.title)||"Course Purchase"}),p(e.status)]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,s.jsx)("span",{children:y(e.created_at)}),(0,s.jsx)("span",{children:"â€¢"}),(0,s.jsx)("span",{className:"font-mono text-xs",children:e.stripe_payment_id})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",e.amount.toFixed(2)]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 uppercase",children:e.currency})]})]})})},e.id)})]})]})]})}},5974:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var s=r(7437);r(2265);var n=r(535),a=r(4508);let l=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(l({variant:r}),t),...n})}},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},ll:function(){return c}});var s=r(7437),n=r(2265),a=r(4508);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});l.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});i.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});c.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});o.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},9179:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return i},a:function(){return c}});var s=r(7437),n=r(2265),a=r(2141);let l=(0,n.createContext)({user:null,loading:!0,signOut:async()=>{}});function i(e){let{children:t}=e,[r,i]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>{a.O.auth.getSession().then(e=>{var t;let{data:{session:r}}=e;i(null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null),d(!1)});let{data:{subscription:e}}=a.O.auth.onAuthStateChange((e,t)=>{var r;i(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),d(!1)});return()=>e.unsubscribe()},[]);let o=async()=>{await a.O.auth.signOut(),i(null)};return(0,s.jsx)(l.Provider,{value:{user:r,loading:c,signOut:o},children:t})}let c=()=>{let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2141:function(e,t,r){"use strict";r.d(t,{O:function(){return l}});var s=r(1545);let n="https://wbuvopdgcksviirckaur.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndidXZvcGRnY2tzdmlpcmNrYXVyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwMjMzMTIsImV4cCI6MjA3NTU5OTMxMn0.elWqpSmCfQ92fpepHoRU77O-x9nMvv8MXZyaV7dUV9s";if(!n||!a)throw Error("Missing Supabase environment variables");let l=(0,s.eI)(n,a)},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(1994),n=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}},2934:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},9388:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1723:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},8226:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},535:function(e,t,r){"use strict";r.d(t,{j:function(){return l}});var s=r(1994);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=s.W,l=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return a(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:i}=t,c=Object.keys(l).map(e=>{let t=null==r?void 0:r[e],s=null==i?void 0:i[e];if(null===t)return null;let a=n(t)||n(s);return l[e][a]}),d=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return a(e,c,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:r,className:s,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...d}[t]):({...i,...d})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[4609,8590,1545,2971,2117,1744],function(){return e(e.s=9767)}),_N_E=e.O()}]);