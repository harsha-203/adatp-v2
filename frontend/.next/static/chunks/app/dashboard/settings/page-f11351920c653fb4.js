(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3455],{5932:function(e,a,s){Promise.resolve().then(s.bind(s,6799))},6799:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return k}});var t=s(7437),l=s(2265),i=s(9179),r=s(2141),n=s(6070),c=s(2869),d=s(5186),o=s(7129),u=s(6831),h=s(2369),m=s(3581),x=s(1671),p=s(9205);let f=(0,p.Z)("id-card",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]),g=(0,p.Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),j=(0,p.Z)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);var y=s(8736);let v=(0,p.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),b=(0,p.Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var N=s(6337),w=s(9202);function k(){let{user:e}=(0,i.a)(),a=(0,l.useRef)(null),[s,p]=(0,l.useState)(!0),[k,_]=(0,l.useState)(!1),[M,Z]=(0,l.useState)(!1),[z,C]=(0,l.useState)({full_name:"",email:"",student_id:"",institution:"",about:"",avatar_url:""}),[S,E]=(0,l.useState)(null),[F,P]=(0,l.useState)("");(0,l.useEffect)(()=>{e&&T()},[e]);let T=async()=>{var a,s;try{let{data:s,error:t}=await r.O.from("users").select("*").eq("id",null==e?void 0:e.id).single();s?(C({full_name:s.full_name||"",email:s.email||(null==e?void 0:e.email)||"",student_id:s.student_id||"",institution:s.institution||"",about:s.about||"",avatar_url:s.avatar_url||""}),s.avatar_url&&P(s.avatar_url)):C({full_name:(null==e?void 0:null===(a=e.user_metadata)||void 0===a?void 0:a.full_name)||"",email:(null==e?void 0:e.email)||"",student_id:"",institution:"",about:"",avatar_url:""})}catch(a){console.error("Error loading profile:",a),C({full_name:(null==e?void 0:null===(s=e.user_metadata)||void 0===s?void 0:s.full_name)||"",email:(null==e?void 0:e.email)||"",student_id:"",institution:"",about:"",avatar_url:""})}finally{p(!1)}},O=(e,a)=>{C(s=>({...s,[e]:a})),Z(!1)},I=async()=>{_(!0);try{let a=z.avatar_url;if(S){let s=S.name.split(".").pop(),t="".concat(null==e?void 0:e.id,"-").concat(Date.now(),".").concat(s),l="avatars/".concat(t),{error:i}=await r.O.storage.from("profile-photos").upload(l,S);if(i)console.error("Error uploading photo:",i);else{let{data:e}=r.O.storage.from("profile-photos").getPublicUrl(l);a=e.publicUrl}}let{error:s}=await r.O.from("users").upsert([{id:null==e?void 0:e.id,email:z.email,full_name:z.full_name,student_id:z.student_id,institution:z.institution,about:z.about,avatar_url:a,updated_at:new Date().toISOString()}]);s?(console.error("Error updating profile:",s),alert("Error saving profile. Please try again.")):(Z(!0),E(null),setTimeout(()=>Z(!1),3e3))}catch(e){console.error("Error saving profile:",e),alert("Error saving profile. Please try again.")}finally{_(!1)}};return s?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"animate-pulse text-gray-600",children:"Loading settings..."})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]}),(0,t.jsxs)(n.Zb,{className:"mb-6",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"w-5 h-5"}),"Profile Information"]})}),(0,t.jsxs)(n.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center pb-6 border-b",children:[(0,t.jsx)(o._,{className:"mb-3",children:"Profile Photo"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(u.qE,{className:"w-32 h-32 cursor-pointer",onClick:()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.click()},children:[(0,t.jsx)(u.F$,{src:F}),(0,t.jsx)(u.Q5,{className:"bg-teal-100 text-2xl",children:(0,t.jsx)(h.Z,{className:"w-16 h-16 text-teal-600"})})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.click()},className:"absolute bottom-0 right-0 w-10 h-10 bg-teal-600 rounded-full flex items-center justify-center hover:bg-teal-700 transition-colors",children:(0,t.jsx)(m.Z,{className:"w-5 h-5 text-white"})})]}),(0,t.jsx)("input",{ref:a,type:"file",accept:"image/*",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(s){if(s.size>5242880){alert("File size must be less than 5MB");return}if(!s.type.startsWith("image/")){alert("Please select an image file");return}E(s);let e=new FileReader;e.onloadend=()=>{P(e.result)},e.readAsDataURL(s)}},className:"hidden"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-3",children:"Click to upload a new photo (Max 5MB)"}),S&&(0,t.jsxs)("p",{className:"text-sm text-teal-600 mt-2 flex items-center gap-1",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4"}),"New photo selected"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(o._,{htmlFor:"full_name",className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4"}),"Full Name"]}),(0,t.jsx)(d.I,{id:"full_name",value:z.full_name,onChange:e=>O("full_name",e.target.value),placeholder:"Enter your full name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(o._,{htmlFor:"student_id",className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(f,{className:"w-4 h-4"}),"Student ID"]}),(0,t.jsx)(d.I,{id:"student_id",value:z.student_id,onChange:e=>O("student_id",e.target.value),placeholder:"e.g., STU-2024-001"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(o._,{htmlFor:"email",className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(g,{className:"w-4 h-4"}),"Email Address"]}),(0,t.jsx)(d.I,{id:"email",type:"email",value:z.email,onChange:e=>O("email",e.target.value),placeholder:"your.email@example.com",disabled:!0}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(o._,{htmlFor:"institution",className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(j,{className:"w-4 h-4"}),"Institution / Organization"]}),(0,t.jsx)(d.I,{id:"institution",value:z.institution,onChange:e=>O("institution",e.target.value),placeholder:"Enter your institution or company"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(o._,{htmlFor:"about",className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(y.Z,{className:"w-4 h-4"}),"About / Bio"]}),(0,t.jsx)("textarea",{id:"about",value:z.about,onChange:e=>O("about",e.target.value),placeholder:"Tell us about yourself and your learning goals...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-600 min-h-[100px]"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(c.z,{onClick:I,disabled:k,className:"bg-teal-600 hover:bg-teal-700",children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):M?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Saved!"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{className:"w-4 h-4 mr-2"}),"Save Changes"]})}),M&&(0,t.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Profile updated successfully!"})]})]})]}),(0,t.jsxs)(n.Zb,{className:"mb-6",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(b,{className:"w-5 h-5"}),"Notification Preferences"]})}),(0,t.jsx)(n.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:"Course Updates"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Get notified about new lessons and course updates"})]}),(0,t.jsx)("input",{type:"checkbox",className:"w-5 h-5 text-teal-600 rounded focus:ring-teal-600",defaultChecked:!0})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:"Quiz Reminders"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Receive reminders for pending quizzes"})]}),(0,t.jsx)("input",{type:"checkbox",className:"w-5 h-5 text-teal-600 rounded focus:ring-teal-600",defaultChecked:!0})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:"Weekly Progress"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Weekly summary of your learning progress"})]}),(0,t.jsx)("input",{type:"checkbox",className:"w-5 h-5 text-teal-600 rounded focus:ring-teal-600",defaultChecked:!0})]})]})})]}),(0,t.jsxs)(n.Zb,{className:"mb-6",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(N.Z,{className:"w-5 h-5"}),"Security"]})}),(0,t.jsx)(n.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:"Password"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Last changed 30 days ago"})]}),(0,t.jsx)(c.z,{variant:"outline",children:"Change Password"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security"})]}),(0,t.jsx)(c.z,{variant:"outline",children:"Enable"})]})]})})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(w.Z,{className:"w-5 h-5"}),"Preferences"]})}),(0,t.jsx)(n.aY,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o._,{htmlFor:"language",className:"mb-2 block",children:"Language"}),(0,t.jsxs)("select",{id:"language",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-600",children:[(0,t.jsx)("option",{children:"English"}),(0,t.jsx)("option",{children:"Spanish"}),(0,t.jsx)("option",{children:"French"}),(0,t.jsx)("option",{children:"German"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o._,{htmlFor:"timezone",className:"mb-2 block",children:"Timezone"}),(0,t.jsxs)("select",{id:"timezone",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-600",children:[(0,t.jsx)("option",{children:"UTC (GMT+0:00)"}),(0,t.jsx)("option",{children:"EST (GMT-5:00)"}),(0,t.jsx)("option",{children:"PST (GMT-8:00)"}),(0,t.jsx)("option",{children:"IST (GMT+5:30)"})]})]})]})})]})]})})}},1671:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(9205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8736:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(9205).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},6337:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(9205).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}},function(e){e.O(0,[4609,8590,1545,2503,2971,2117,1744],function(){return e(e.s=5932)}),_N_E=e.O()}]);