(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4996],{3148:function(e,s,t){Promise.resolve().then(t.bind(t,4470))},4470:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var r=t(7437),a=t(2265),n=t(9376),i=t(6070),l=t(2869),c=t(5974);let o=(0,t(9205).Z)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]);var d=t(4794),u=t(4372),x=t(8736),m=t(2735),h=t(9179),f=t(3145),v=t(8574),p=t(257);function g(){let e=(0,n.useRouter)(),{user:s}=(0,h.a)(),[t,g]=(0,a.useState)([]),[b,j]=(0,a.useState)([]),[y,N]=(0,a.useState)(!0),[w,k]=(0,a.useState)("courses"),C=p.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8001/api";(0,a.useEffect)(()=>{s&&(Z(),M())},[s]);let Z=async()=>{if(s)try{N(!0);let e=await fetch("".concat(C,"/purchases/").concat(s.id)),t=await e.json();g(t)}catch(e){console.error("Error loading purchases:",e)}finally{N(!1)}},M=async()=>{if(s)try{let e=await fetch("".concat(C,"/invoices/").concat(s.id)),t=await e.json();j(t)}catch(e){console.error("Error loading invoices:",e)}},_=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric"});return y?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,r.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded w-1/3"}),[1,2,3].map(e=>(0,r.jsx)("div",{className:"h-32 bg-gray-200 rounded"},e))]})})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-teal-600 to-cyan-600 text-white",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-8 py-12",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)(o,{className:"w-10 h-10"}),(0,r.jsx)("h1",{className:"text-4xl font-bold",children:"My Purchases"})]}),(0,r.jsx)("p",{className:"text-xl text-white/90",children:"Access your purchased courses and invoices"})]})}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-8 py-8",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsx)(i.Zb,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Spent"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["$",t.reduce((e,s)=>e+s.price_paid,0).toFixed(2)]})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-teal-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(d.Z,{className:"w-6 h-6 text-teal-600"})})]})}),(0,r.jsx)(i.Zb,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Courses Purchased"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:t.length})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(u.Z,{className:"w-6 h-6 text-blue-600"})})]})}),(0,r.jsx)(i.Zb,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Invoices"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:b.length})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(x.Z,{className:"w-6 h-6 text-purple-600"})})]})})]}),(0,r.jsxs)("div",{className:"flex gap-4 mb-6 border-b",children:[(0,r.jsx)("button",{onClick:()=>k("courses"),className:"px-4 py-2 font-semibold transition-colors relative ".concat("courses"===w?"text-teal-600 border-b-2 border-teal-600":"text-gray-600 hover:text-gray-900"),children:"Purchased Courses"}),(0,r.jsx)("button",{onClick:()=>k("invoices"),className:"px-4 py-2 font-semibold transition-colors relative ".concat("invoices"===w?"text-teal-600 border-b-2 border-teal-600":"text-gray-600 hover:text-gray-900"),children:"Invoices"})]}),"courses"===w&&(0,r.jsx)("div",{children:0===t.length?(0,r.jsxs)(i.Zb,{className:"p-12 text-center",children:[(0,r.jsx)(d.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No purchases yet"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Browse courses and start learning today"}),(0,r.jsx)(l.z,{onClick:()=>e.push("/courses"),className:"bg-teal-600 hover:bg-teal-700",children:"Browse Courses"})]}):(0,r.jsx)("div",{className:"space-y-4",children:t.map(s=>{var t,a,n,o,d;return(0,r.jsx)(i.Zb,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e.push("/courses/".concat(s.course_id)),children:(0,r.jsxs)("div",{className:"flex gap-6",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-40 h-24 bg-gray-200 rounded-lg overflow-hidden relative",children:(null===(t=s.courses)||void 0===t?void 0:t.thumbnail_url)?(0,r.jsx)(f.default,{src:s.courses.thumbnail_url,alt:s.courses.title||"Course",fill:!0,className:"object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-teal-100 to-cyan-100",children:(0,r.jsx)(u.Z,{className:"w-10 h-10 text-teal-600"})})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:(null===(a=s.courses)||void 0===a?void 0:a.title)||"Course"}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(null===(n=s.courses)||void 0===n?void 0:n.instructor_name)&&(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["by ",s.courses.instructor_name]}),(null===(o=s.courses)||void 0===o?void 0:o.category)&&(0,r.jsx)(c.C,{className:"bg-teal-100 text-teal-800",children:s.courses.category}),(null===(d=s.courses)||void 0===d?void 0:d.difficulty)&&(0,r.jsx)(c.C,{variant:"outline",children:s.courses.difficulty})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("p",{className:"text-2xl font-bold text-teal-600",children:(0,v.ML)(s.price_paid)})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Purchased on ",_(s.created_at)]}),(0,r.jsxs)(l.z,{onClick:t=>{t.stopPropagation(),e.push("/courses/".concat(s.course_id,"/learn"))},className:"bg-teal-600 hover:bg-teal-700",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Start Learning"]})]})]})]})},s.id)})})}),"invoices"===w&&(0,r.jsx)("div",{children:0===b.length?(0,r.jsxs)(i.Zb,{className:"p-12 text-center",children:[(0,r.jsx)(x.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No invoices yet"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Your purchase invoices will appear here"})]}):(0,r.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,r.jsxs)(i.Zb,{className:"p-6 hover:shadow-md transition-shadow",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-6 flex-1",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(x.Z,{className:"w-6 h-6 text-purple-600"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h3",{className:"font-bold text-gray-900 mb-2",children:["Invoice #",e.invoice_number]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,r.jsxs)("span",{children:["Issued: ",_(e.issued_at)]}),e.paid_at&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"â€¢"}),(0,r.jsxs)("span",{children:["Paid: ",_(e.paid_at)]})]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:["$",e.total.toFixed(2)]}),(0,r.jsx)(c.C,{className:"paid"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:e.status.toUpperCase()})]}),(0,r.jsxs)(l.z,{variant:"outline",size:"sm",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Download"]})]})}),(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t grid grid-cols-3 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Subtotal"}),(0,r.jsxs)("p",{className:"font-semibold text-gray-900",children:["$",e.amount.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Tax"}),(0,r.jsxs)("p",{className:"font-semibold text-gray-900",children:["$",e.tax.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Total"}),(0,r.jsxs)("p",{className:"font-semibold text-teal-600",children:["$",e.total.toFixed(2)]})]})]})]},e.id))})})]})]})}},5974:function(e,s,t){"use strict";t.d(s,{C:function(){return l}});var r=t(7437);t(2265);var a=t(535),n=t(4508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:t}),s),...a})}},2869:function(e,s,t){"use strict";t.d(s,{z:function(){return o}});var r=t(7437),a=t(2265),n=t(7053),i=t(535),l=t(4508);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,s)=>{let{className:t,variant:a,size:i,asChild:o=!1,...d}=e,u=o?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(c({variant:a,size:i,className:t})),ref:s,...d})});o.displayName="Button"},6070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var r=t(7437),a=t(2265),n=t(4508);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},9179:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return l},a:function(){return c}});var r=t(7437),a=t(2265),n=t(2141);let i=(0,a.createContext)({user:null,loading:!0,signOut:async()=>{}});function l(e){let{children:s}=e,[t,l]=(0,a.useState)(null),[c,o]=(0,a.useState)(!0);(0,a.useEffect)(()=>{n.O.auth.getSession().then(e=>{var s;let{data:{session:t}}=e;l(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),o(!1)});let{data:{subscription:e}}=n.O.auth.onAuthStateChange((e,s)=>{var t;l(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),o(!1)});return()=>e.unsubscribe()},[]);let d=async()=>{await n.O.auth.signOut(),l(null)};return(0,r.jsx)(i.Provider,{value:{user:t,loading:c,signOut:d},children:s})}let c=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8574:function(e,s,t){"use strict";function r(e){return Math.round(83*e)}function a(e){var s;return s=r(e),"â‚¹".concat(s.toLocaleString("en-IN"))}t.d(s,{ML:function(){return a},mE:function(){return r}})},2141:function(e,s,t){"use strict";t.d(s,{O:function(){return i}});var r=t(1545);let a="https://wbuvopdgcksviirckaur.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndidXZvcGRnY2tzdmlpcmNrYXVyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwMjMzMTIsImV4cCI6MjA3NTU5OTMxMn0.elWqpSmCfQ92fpepHoRU77O-x9nMvv8MXZyaV7dUV9s";if(!a||!n)throw Error("Missing Supabase environment variables");let i=(0,r.eI)(a,n)},4508:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var r=t(1994),a=t(3335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,r.W)(s))}},4372:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9205).Z)("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},2735:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9205).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},8736:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9205).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}},function(e){e.O(0,[4609,8590,1545,3039,2971,2117,1744],function(){return e(e.s=3148)}),_N_E=e.O()}]);