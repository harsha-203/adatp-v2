(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3041],{4751:function(e,s,t){Promise.resolve().then(t.bind(t,755))},755:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return S}});var r=t(7437),a=t(2265),l=t(9376),n=t(7648),i=t(2141),c=t(9179),d=t(6070),o=t(2869),x=t(2759),u=t(1769),h=t(6595),m=t(5805),f=t(1723),p=t(4372),g=t(3417),j=t(6275),N=t(1671),v=t(3327),b=t(3134),w=t(875),y=t(4508);let _=b.fC,C=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(b.ck,{ref:s,className:(0,y.cn)("border-b",t),...a})});C.displayName="AccordionItem";let Z=a.forwardRef((e,s)=>{let{className:t,children:a,...l}=e;return(0,r.jsx)(b.h4,{className:"flex",children:(0,r.jsxs)(b.xz,{ref:s,className:(0,y.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...l,children:[a,(0,r.jsx)(w.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});Z.displayName=b.xz.displayName;let k=a.forwardRef((e,s)=>{let{className:t,children:a,...l}=e;return(0,r.jsx)(b.VY,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,r.jsx)("div",{className:(0,y.cn)("pb-4 pt-0",t),children:a})})});k.displayName=b.VY.displayName;var z=t(8574),O=t(3464);function S(){let e=(0,l.useParams)(),s=(0,l.useRouter)(),{user:t}=(0,c.a)(),b=e.id,[w,y]=(0,a.useState)(null),[S,E]=(0,a.useState)([]),[I,M]=(0,a.useState)(!0),[R,Y]=(0,a.useState)(!1),[A,F]=(0,a.useState)(null),[V,J]=(0,a.useState)(0),[L,T]=(0,a.useState)(!1),[X,q]=(0,a.useState)(!1),P="".concat("https://enroll-repair.preview.emergentagent.com","/api")||0;(0,a.useEffect)(()=>{U(),t&&B()},[b,t]);let U=async()=>{try{let{data:e,error:s}=await i.O.from("courses").select("*").eq("id",b).single();if(s)throw s;y(e);let{data:t,error:r}=await i.O.from("modules").select("\n          id,\n          title,\n          description,\n          order_index,\n          lessons (\n            id,\n            title,\n            description,\n            content_type,\n            duration_minutes,\n            order_index\n          )\n        ").eq("course_id",b).order("order_index",{ascending:!0});if(r)throw r;let a=t.map(e=>({...e,lessons:(e.lessons||[]).sort((e,s)=>e.order_index-s.order_index)}));E(a)}catch(e){console.error("Error loading course details:",e)}finally{M(!1)}},B=async()=>{try{let{data:e,error:s}=await i.O.from("enrollments").select("id, progress_percentage").eq("user_id",null==t?void 0:t.id).eq("course_id",b).single();if(!s&&e&&(Y(!0),F(e.id),J(e.progress_percentage||0),e.id)){let{data:s}=await i.O.from("lesson_progress").select("lesson_id, completed").eq("enrollment_id",e.id);if(s){let e=new Set(s.filter(e=>e.completed).map(e=>e.lesson_id));E(s=>s.map(s=>({...s,lessons:s.lessons.map(s=>({...s,completed:e.has(s.id)}))})))}}}catch(e){console.error("Error checking enrollment:",e)}},D=async()=>{if(!t){s.push("/auth/signin");return}T(!0);try{let e=await O.Z.post("".concat(P,"/courses/").concat(b,"/enroll?user_id=").concat(t.id));e.data.message,Y(!0),F(e.data.enrollment_id),s.push("/courses/".concat(b,"/learn"))}catch(s){var e,r;console.error("Error enrolling:",s),alert("Error enrolling in course: "+((null===(r=s.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.detail)||s.message))}finally{T(!1)}},W=async()=>{if(!t){s.push("/auth/signin");return}q(!0);try{if(!(await fetch("".concat(P,"/cart/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t.id,course_id:b})})).ok)throw Error("Failed to add to cart");alert("Course added to cart!"),s.push("/cart")}catch(e){console.error("Error adding to cart:",e),alert("Failed to add course to cart")}finally{q(!1)}},G=S.reduce((e,s)=>e+s.lessons.length,0),H=S.reduce((e,s)=>e+s.lessons.reduce((e,s)=>e+(s.duration_minutes||0),0),0);return I?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,r.jsx)("div",{className:"h-64 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-2/3"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})}):w?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[(0,r.jsxs)(n.default,{href:"/",className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-teal-600 rounded-md flex items-center justify-center",children:(0,r.jsx)(u.Z,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"Edubox"})]}),(0,r.jsx)("div",{className:"flex gap-4",children:t?(0,r.jsx)(o.z,{asChild:!0,className:"bg-teal-600 hover:bg-teal-700",children:(0,r.jsx)(n.default,{href:"/dashboard",children:"Dashboard"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.z,{asChild:!0,variant:"outline",children:(0,r.jsx)(n.default,{href:"/auth/signin",children:"Sign In"})}),(0,r.jsx)(o.z,{asChild:!0,className:"bg-teal-600 hover:bg-teal-700",children:(0,r.jsx)(n.default,{href:"/auth/signup",children:"Sign Up"})})]})})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-teal-600 to-cyan-600 text-white",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("span",{className:"bg-white/20 backdrop-blur px-3 py-1 rounded-full text-sm",children:w.category}),(0,r.jsx)("span",{className:"bg-white/20 backdrop-blur px-3 py-1 rounded-full text-sm",children:w.difficulty})]}),(0,r.jsx)("h1",{className:"text-4xl font-bold mb-4",children:w.title}),(0,r.jsx)("p",{className:"text-xl text-white/90 mb-6",children:w.description}),(0,r.jsxs)("div",{className:"flex items-center gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),(0,r.jsx)("span",{className:"font-semibold",children:w.average_rating.toFixed(1)}),(0,r.jsxs)("span",{className:"text-white/80",children:["(",w.review_count," reviews)"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"10,000+ students"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-6 text-sm mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[Math.floor(H/60),"h ",H%60,"m total"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[G," lessons"]})]})]}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:R?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.z,{asChild:!0,size:"lg",className:"bg-white text-teal-600 hover:bg-gray-100",children:(0,r.jsxs)(n.default,{href:"/courses/".concat(b,"/learn"),children:[(0,r.jsx)(p.Z,{className:"w-5 h-5 mr-2"}),"Continue Learning"]})}),(0,r.jsx)(o.z,{asChild:!0,size:"lg",variant:"outline",className:"bg-white/10 backdrop-blur text-white border-white hover:bg-white/20",children:(0,r.jsxs)(n.default,{href:"/courses/".concat(b,"/forum"),children:[(0,r.jsx)(g.Z,{className:"w-5 h-5 mr-2"}),"Discussion Forum"]})}),(0,r.jsxs)("div",{className:"text-white/90",children:[(0,r.jsxs)("span",{className:"text-sm",children:["Your progress: ",V,"%"]}),(0,r.jsx)(x.E,{value:V,className:"h-2 w-32 bg-white/20"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.z,{size:"lg",className:"bg-white text-teal-600 hover:bg-gray-100",onClick:D,disabled:L,children:L?"Enrolling...":"Enroll Now - ".concat((0,z.ML)(w.price))}),(0,r.jsxs)(o.z,{size:"lg",variant:"outline",className:"bg-teal-500/20 backdrop-blur text-white border-white hover:bg-teal-500/30",onClick:W,disabled:X,children:[(0,r.jsx)(j.Z,{className:"w-5 h-5 mr-2"}),X?"Adding...":"Add to Cart"]}),(0,r.jsx)(o.z,{asChild:!0,size:"lg",variant:"outline",className:"bg-white/10 backdrop-blur text-white border-white hover:bg-white/20",children:(0,r.jsxs)(n.default,{href:"/courses/".concat(b,"/forum"),children:[(0,r.jsx)(g.Z,{className:"w-5 h-5 mr-2"}),"View Forum"]})})]})})]}),(0,r.jsx)("div",{className:"relative h-80 bg-white/10 backdrop-blur rounded-lg overflow-hidden",children:w.thumbnail_url&&(0,r.jsx)("img",{src:w.thumbnail_url,alt:w.title,className:"w-full h-full object-cover"})})]})})}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,r.jsxs)(d.Zb,{children:[(0,r.jsx)(d.Ol,{children:(0,r.jsx)(d.ll,{children:"Course Curriculum"})}),(0,r.jsx)(d.aY,{children:(0,r.jsx)(_,{type:"single",collapsible:!0,className:"w-full",children:S.map((e,s)=>(0,r.jsxs)(C,{value:"module-".concat(s),children:[(0,r.jsx)(Z,{className:"text-left",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900",children:["Module ",e.order_index,": ",e.title]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[e.lessons.length," lessons â€¢"," ",e.lessons.reduce((e,s)=>e+(s.duration_minutes||0),0)," min"]})]})}),(0,r.jsx)(k,{children:(0,r.jsx)("div",{className:"space-y-2 pl-4",children:e.lessons.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-3 border-b last:border-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[e.completed?(0,r.jsx)(N.Z,{className:"w-5 h-5 text-green-600"}):"video"===e.content_type?(0,r.jsx)(p.Z,{className:"w-5 h-5 text-gray-400"}):(0,r.jsx)(u.Z,{className:"w-5 h-5 text-gray-400"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium text-gray-900",children:[s+1,". ",e.title]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[e.duration_minutes," min"]})]})]},e.id))})})]},e.id))})})]}),(0,r.jsxs)(d.Zb,{children:[(0,r.jsx)(d.Ol,{children:(0,r.jsx)(d.ll,{children:"What You'll Learn"})}),(0,r.jsx)(d.aY,{children:(0,r.jsxs)("ul",{className:"grid md:grid-cols-2 gap-3",children:[(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)(N.Z,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,r.jsx)("span",{children:"Master the fundamentals and core concepts"})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)(N.Z,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,r.jsx)("span",{children:"Apply knowledge through practical exercises"})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)(N.Z,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,r.jsx)("span",{children:"Complete real-world projects"})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)(N.Z,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,r.jsx)("span",{children:"Earn a certificate of completion"})]})]})})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(d.Zb,{children:[(0,r.jsx)(d.Ol,{children:(0,r.jsx)(d.ll,{children:"Instructor"})}),(0,r.jsx)(d.aY,{children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-teal-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:w.instructor_name.charAt(0)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:w.instructor_name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:w.instructor_bio})]})]})})]}),(0,r.jsxs)(d.Zb,{children:[(0,r.jsx)(d.Ol,{children:(0,r.jsx)(d.ll,{children:"This course includes"})}),(0,r.jsx)(d.aY,{children:(0,r.jsxs)("ul",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4 text-teal-600"}),(0,r.jsxs)("span",{children:[Math.floor(H/60)," hours on-demand video"]})]}),(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4 text-teal-600"}),(0,r.jsxs)("span",{children:[G," lessons"]})]}),(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.Z,{className:"w-4 h-4 text-teal-600"}),(0,r.jsx)("span",{children:"Certificate of completion"})]}),(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 text-teal-600"}),(0,r.jsx)("span",{children:"Lifetime access"})]})]})})]})]})]})})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Course not found"}),(0,r.jsx)(o.z,{asChild:!0,children:(0,r.jsx)(n.default,{href:"/courses",children:"Browse Courses"})})]})})}},2869:function(e,s,t){"use strict";t.d(s,{z:function(){return d}});var r=t(7437),a=t(2265),l=t(7053),n=t(535),i=t(4508);let c=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,s)=>{let{className:t,variant:a,size:n,asChild:d=!1,...o}=e,x=d?l.g7:"button";return(0,r.jsx)(x,{className:(0,i.cn)(c({variant:a,size:n,className:t})),ref:s,...o})});d.displayName="Button"},6070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return n},aY:function(){return o},ll:function(){return c}});var r=t(7437),a=t(2265),l=t(4508);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});n.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},2759:function(e,s,t){"use strict";t.d(s,{E:function(){return i}});var r=t(7437),a=t(2265),l=t(610),n=t(4508);let i=a.forwardRef((e,s)=>{let{className:t,value:a,...i}=e;return(0,r.jsx)(l.fC,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:(0,r.jsx)(l.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});i.displayName=l.fC.displayName},9179:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return i},a:function(){return c}});var r=t(7437),a=t(2265),l=t(2141);let n=(0,a.createContext)({user:null,loading:!0,signOut:async()=>{}});function i(e){let{children:s}=e,[t,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{l.O.auth.getSession().then(e=>{var s;let{data:{session:t}}=e;i(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),d(!1)});let{data:{subscription:e}}=l.O.auth.onAuthStateChange((e,s)=>{var t;i(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),d(!1)});return()=>e.unsubscribe()},[]);let o=async()=>{await l.O.auth.signOut(),i(null)};return(0,r.jsx)(n.Provider,{value:{user:t,loading:c,signOut:o},children:s})}let c=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8574:function(e,s,t){"use strict";function r(e){return Math.round(83*e)}function a(e){var s;return s=r(e),"â‚¹".concat(s.toLocaleString("en-IN"))}t.d(s,{ML:function(){return a},mE:function(){return r}})},2141:function(e,s,t){"use strict";t.d(s,{O:function(){return n}});var r=t(1545);let a="https://wbuvopdgcksviirckaur.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndidXZvcGRnY2tzdmlpcmNrYXVyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwMjMzMTIsImV4cCI6MjA3NTU5OTMxMn0.elWqpSmCfQ92fpepHoRU77O-x9nMvv8MXZyaV7dUV9s";if(!a||!l)throw Error("Missing Supabase environment variables");let n=(0,r.eI)(a,l)},4508:function(e,s,t){"use strict";t.d(s,{cn:function(){return l}});var r=t(1994),a=t(3335);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,r.W)(s))}}},function(e){e.O(0,[4609,8590,1545,3464,5650,7067,4205,2971,2117,1744],function(){return e(e.s=4751)}),_N_E=e.O()}]);