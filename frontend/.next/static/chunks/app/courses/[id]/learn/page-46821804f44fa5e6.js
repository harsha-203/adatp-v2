(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4518],{2241:function(e,s,t){Promise.resolve().then(t.bind(t,5141))},5141:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Z}});var r=t(7437),a=t(2265),n=t(9376),l=t(7648),i=t(166),c=t(2141),o=t(9179),d=t(3464),u=t(6070),m=t(2869),f=t(2759),x=t(2339),h=t(2451),g=t(1723),p=t(1769),v=t(6215),j=t(4372),N=t(5275),b=t(1178),y=t(1671),w=t(407),C=t(3327);let k=(0,i.default)(()=>t.e(5610).then(t.bind(t,5610)),{loadableGenerated:{webpack:()=>[5610]},ssr:!1});function Z(){let e=(0,n.useParams)(),s=(0,n.useRouter)(),{user:t}=(0,o.a)(),i=e.id,[Z,S]=(0,a.useState)(null),[_,O]=(0,a.useState)([]),[z,I]=(0,a.useState)(null),[R,E]=(0,a.useState)(0),[P,V]=(0,a.useState)(null),[M,Y]=(0,a.useState)(!0),[A,U]=(0,a.useState)(!1),[F,J]=(0,a.useState)(!1),[X,q]=(0,a.useState)(!1),B="https://enroll-repair.preview.emergentagent.com";(0,a.useEffect)(()=>{if(!t){s.push("/auth/signin");return}L()},[i,t]);let L=async()=>{try{let e=await d.Z.get("".concat(B,"/courses/").concat(i,"/details"));S(e.data.course),O(e.data.lessons),e.data.lessons.length>0&&(I(e.data.lessons[0]),E(0));let{data:r,error:a}=await c.O.from("enrollments").select("*").eq("user_id",null==t?void 0:t.id).eq("course_id",i).single();if(a||!r){s.push("/courses/".concat(i));return}V(r),await c.O.from("enrollments").update({last_accessed:new Date().toISOString()}).eq("id",r.id),await T(r.id)}catch(e){console.error("Error loading course data:",e)}finally{Y(!1)}},T=async e=>{try{let s=(await d.Z.get("".concat(B,"/courses/").concat(i,"/lessons/progress?enrollment_id=").concat(e))).data;O(e=>e.map(e=>{let t=s.find(s=>s.lesson_id===e.id);return{...e,completed:(null==t?void 0:t.completed)||!1}}))}catch(e){console.error("Error loading lesson progress:",e)}},D=async(e,s)=>{if(P){U(!0);try{await d.Z.post("".concat(B,"/courses/").concat(i,"/lessons/").concat(e,"/progress"),null,{params:{enrollment_id:P.id,completed:s}}),O(t=>t.map(t=>t.id===e?{...t,completed:s}:t));let{data:t}=await c.O.from("enrollments").select("*").eq("id",P.id).single();V(t)}catch(e){console.error("Error marking lesson:",e)}finally{U(!1)}}},Q=async()=>{if(z&&t)try{F?J(!1):(await d.Z.post("".concat(B,"/bookmarks"),{user_id:t.id,lesson_id:z.id,note:""}),J(!0))}catch(e){console.error("Error toggling bookmark:",e)}},G=e=>{e>=0&&e<_.length&&(I(_[e]),E(e),q(!1))};if(M)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-pulse text-gray-600",children:"Loading course..."})});if(!Z||!z)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"text-gray-600",children:"Course not found"})});let H=_.filter(e=>e.completed).length,W=_.length>0?H/_.length*100:0;return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("div",{className:"flex-1 p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)(l.default,{href:"/courses/".concat(i),className:"text-teal-600 hover:text-teal-700 flex items-center gap-2 mb-4",children:[(0,r.jsx)(h.Z,{className:"w-4 h-4"}),"Back to Course"]}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:Z.title}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(g.Z,{className:"w-4 h-4"}),Z.duration]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4"}),_.length," lessons"]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(v.Z,{className:"w-4 h-4"}),W.toFixed(0),"% complete"]})]})]}),(0,r.jsx)(u.Zb,{className:"mb-6",children:(0,r.jsx)(u.aY,{className:"p-0",children:"video"===z.content_type&&z.content_url?(0,r.jsx)("div",{className:"aspect-video bg-black",children:(0,r.jsx)(k,{url:z.content_url,width:"100%",height:"100%",controls:!0,playing:X,onPlay:()=>q(!0),onPause:()=>q(!1)})}):(0,r.jsx)("div",{className:"aspect-video bg-gradient-to-br from-teal-500 to-teal-700 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center text-white",children:[(0,r.jsx)(j.Z,{className:"w-20 h-20 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{className:"text-xl font-semibold",children:"Video content will be available soon"}),(0,r.jsx)("p",{className:"text-sm opacity-80 mt-2",children:"For now, please continue with the lesson materials"})]})})})}),(0,r.jsx)(u.Zb,{children:(0,r.jsxs)(u.aY,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:z.title}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(m.z,{variant:"outline",size:"sm",onClick:Q,children:[F?(0,r.jsx)(N.Z,{className:"w-4 h-4 mr-2"}):(0,r.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),F?"Bookmarked":"Bookmark"]}),(0,r.jsxs)(m.z,{variant:z.completed?"outline":"default",size:"sm",onClick:()=>D(z.id,!z.completed),disabled:A,className:z.completed?"":"bg-green-600 hover:bg-green-700",children:[(0,r.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),z.completed?"Completed":"Mark Complete"]})]})]}),(0,r.jsxs)(x.mQ,{defaultValue:"overview",className:"w-full",children:[(0,r.jsxs)(x.dr,{className:"grid w-full grid-cols-3",children:[(0,r.jsx)(x.SP,{value:"overview",children:"Overview"}),(0,r.jsx)(x.SP,{value:"notes",children:"Notes"}),(0,r.jsx)(x.SP,{value:"resources",children:"Resources"})]}),(0,r.jsx)(x.nU,{value:"overview",className:"mt-4",children:(0,r.jsx)("div",{className:"prose max-w-none",children:(0,r.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:z.description||"No description available for this lesson."})})}),(0,r.jsx)(x.nU,{value:"notes",className:"mt-4",children:(0,r.jsxs)("div",{className:"text-gray-600",children:[(0,r.jsx)("p",{children:"Take notes while watching the lesson..."}),(0,r.jsx)("textarea",{className:"w-full mt-4 p-4 border rounded-lg",rows:6,placeholder:"Your notes here..."})]})}),(0,r.jsx)(x.nU,{value:"resources",className:"mt-4",children:(0,r.jsx)("div",{className:"text-gray-600",children:(0,r.jsx)("p",{children:"Additional resources and materials will appear here."})})})]})]})}),(0,r.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,r.jsxs)(m.z,{variant:"outline",onClick:()=>{R>0&&G(R-1)},disabled:0===R,children:[(0,r.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Previous Lesson"]}),(0,r.jsxs)(m.z,{onClick:()=>{R<_.length-1&&G(R+1)},disabled:R===_.length-1,className:"bg-teal-600 hover:bg-teal-700",children:["Next Lesson",(0,r.jsx)(w.Z,{className:"w-4 h-4 ml-2"})]})]})]}),(0,r.jsxs)("div",{className:"w-96 bg-white border-l border-gray-200 p-6 overflow-y-auto max-h-screen",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Course Progress"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,r.jsxs)("span",{children:[H," of ",_.length," lessons"]}),(0,r.jsxs)("span",{children:[W.toFixed(0),"%"]})]}),(0,r.jsx)(f.E,{value:W,className:"h-2"})]})]}),100===W&&(0,r.jsx)(u.Zb,{className:"mb-6 bg-gradient-to-r from-green-50 to-teal-50 border-green-200",children:(0,r.jsx)(u.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(C.Z,{className:"w-8 h-8 text-green-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:"Congratulations!"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Course completed \uD83C\uDF89"})]})]})})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Lessons"}),_.map((e,s)=>(0,r.jsx)("button",{onClick:()=>G(s),className:"w-full text-left p-3 rounded-lg border transition-colors ".concat(z.id===e.id?"bg-teal-50 border-teal-500":"bg-white border-gray-200 hover:bg-gray-50"),children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 mt-1",children:e.completed?(0,r.jsx)(y.Z,{className:"w-5 h-5 text-green-600"}):(0,r.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-sm ".concat(z.id===e.id?"text-teal-700":"text-gray-900"),children:e.title}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[(0,r.jsx)(g.Z,{className:"w-3 h-3"}),e.duration_minutes," min"]})]})]})},e.id))]})]})]})})}},2869:function(e,s,t){"use strict";t.d(s,{z:function(){return o}});var r=t(7437),a=t(2265),n=t(7053),l=t(535),i=t(4508);let c=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,s)=>{let{className:t,variant:a,size:l,asChild:o=!1,...d}=e,u=o?n.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(c({variant:a,size:l,className:t})),ref:s,...d})});o.displayName="Button"},6070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return l},aY:function(){return d},ll:function(){return c}});var r=t(7437),a=t(2265),n=t(4508);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});l.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},2759:function(e,s,t){"use strict";t.d(s,{E:function(){return i}});var r=t(7437),a=t(2265),n=t(610),l=t(4508);let i=a.forwardRef((e,s)=>{let{className:t,value:a,...i}=e;return(0,r.jsx)(n.fC,{ref:s,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:(0,r.jsx)(n.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});i.displayName=n.fC.displayName},2339:function(e,s,t){"use strict";t.d(s,{SP:function(){return o},dr:function(){return c},mQ:function(){return i},nU:function(){return d}});var r=t(7437),a=t(2265),n=t(7625),l=t(4508);let i=n.fC,c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.aV,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500",t),...a})});c.displayName=n.aV.displayName;let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.xz,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-gray-900 data-[state=active]:shadow-sm",t),...a})});o.displayName=n.xz.displayName;let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.VY,{ref:s,className:(0,l.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2",t),...a})});d.displayName=n.VY.displayName},9179:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return i},a:function(){return c}});var r=t(7437),a=t(2265),n=t(2141);let l=(0,a.createContext)({user:null,loading:!0,signOut:async()=>{}});function i(e){let{children:s}=e,[t,i]=(0,a.useState)(null),[c,o]=(0,a.useState)(!0);(0,a.useEffect)(()=>{n.O.auth.getSession().then(e=>{var s;let{data:{session:t}}=e;i(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),o(!1)});let{data:{subscription:e}}=n.O.auth.onAuthStateChange((e,s)=>{var t;i(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),o(!1)});return()=>e.unsubscribe()},[]);let d=async()=>{await n.O.auth.signOut(),i(null)};return(0,r.jsx)(l.Provider,{value:{user:t,loading:c,signOut:d},children:s})}let c=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2141:function(e,s,t){"use strict";t.d(s,{O:function(){return l}});var r=t(1545);let a="https://wbuvopdgcksviirckaur.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndidXZvcGRnY2tzdmlpcmNrYXVyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwMjMzMTIsImV4cCI6MjA3NTU5OTMxMn0.elWqpSmCfQ92fpepHoRU77O-x9nMvv8MXZyaV7dUV9s";if(!a||!n)throw Error("Missing Supabase environment variables");let l=(0,r.eI)(a,n)},4508:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var r=t(1994),a=t(3335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,r.W)(s))}}},function(e){e.O(0,[4609,8590,1545,3464,5650,7067,8703,2971,2117,1744],function(){return e(e.s=2241)}),_N_E=e.O()}]);