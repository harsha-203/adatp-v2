(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1565],{6247:function(e,s,t){Promise.resolve().then(t.bind(t,3886))},3886:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var a=t(7437),r=t(2265),n=t(9376),l=t(6070),c=t(2869),i=t(2339),o=t(6275),d=t(4794),u=t(7559),m=t(8930),x=t(8226),h=t(6858),f=t(9179),g=t(3145),p=t(8574);function v(){let e=(0,n.useRouter)(),{user:s}=(0,f.a)(),[t,v]=(0,r.useState)([]),[b,j]=(0,r.useState)([]),[N,y]=(0,r.useState)(!0),[w,C]=(0,r.useState)(null),[S,k]=(0,r.useState)("cart"),I="https://enroll-repair.preview.emergentagent.com";(0,r.useEffect)(()=>{s?(_(),Z()):e.push("/auth/signin")},[s]);let Z=async()=>{if(s)try{let e=await fetch("".concat(I,"/purchases/").concat(s.id)),t=await e.json();j(t)}catch(e){console.error("Error loading purchases:",e)}},_=async()=>{if(s)try{y(!0);let e=await fetch("".concat(I,"/cart/").concat(s.id)),t=await e.json();v(t)}catch(e){console.error("Error loading cart:",e)}finally{y(!1)}},E=async e=>{if(s)try{C(e),await fetch("".concat(I,"/cart/remove?user_id=").concat(s.id,"&course_id=").concat(e),{method:"DELETE"}),v(t.filter(s=>s.course_id!==e))}catch(e){console.error("Error removing item:",e),alert("Failed to remove item from cart")}finally{C(null)}},z=async()=>{if(s&&confirm("Are you sure you want to clear your cart?"))try{await fetch("".concat(I,"/cart/").concat(s.id,"/clear"),{method:"DELETE"}),v([])}catch(e){console.error("Error clearing cart:",e),alert("Failed to clear cart")}};if(N)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded w-1/3"}),[1,2,3].map(e=>(0,a.jsx)("div",{className:"h-32 bg-gray-200 rounded"},e))]})})});let M=t.reduce((e,s)=>e+s.courses.price,0);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-teal-600 to-cyan-600 text-white",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-8 py-12",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(o.Z,{className:"w-10 h-10"}),(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"Cart & Purchases"})]}),(0,a.jsx)("p",{className:"text-xl text-white/90",children:"Manage your shopping cart and view purchase history"})]})}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-8 py-8",children:(0,a.jsxs)(i.mQ,{value:S,onValueChange:k,className:"w-full",children:[(0,a.jsxs)(i.dr,{className:"grid w-full max-w-md grid-cols-2 mb-8",children:[(0,a.jsxs)(i.SP,{value:"cart",className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"Shopping Cart (",t.length,")"]}),(0,a.jsxs)(i.SP,{value:"purchases",className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"My Purchases (",b.length,")"]})]}),(0,a.jsx)(i.nU,{value:"cart",children:0===t.length?(0,a.jsxs)(l.Zb,{className:"p-12 text-center",children:[(0,a.jsx)(u.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Your cart is empty"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Add courses to your cart to get started"}),(0,a.jsx)(c.z,{onClick:()=>e.push("/courses"),className:"bg-teal-600 hover:bg-teal-700",children:"Browse Courses"})]}):(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:[t.length," ",1===t.length?"Item":"Items"]}),t.length>0&&(0,a.jsx)(c.z,{variant:"outline",size:"sm",onClick:z,className:"text-red-600 hover:text-red-700",children:"Clear Cart"})]}),t.map(e=>(0,a.jsx)(l.Zb,{className:"p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-32 h-20 bg-gray-200 rounded-lg overflow-hidden relative",children:e.courses.thumbnail_url?(0,a.jsx)(g.default,{src:e.courses.thumbnail_url,alt:e.courses.title,fill:!0,className:"object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-teal-100 to-cyan-100",children:(0,a.jsx)(o.Z,{className:"w-8 h-8 text-teal-600"})})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:e.courses.title}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["by ",e.courses.instructor_name]}),(0,a.jsx)("span",{className:"px-2 py-1 bg-teal-100 text-teal-800 text-xs rounded",children:e.courses.category}),(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:e.courses.difficulty})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-teal-600",children:(0,p.ML)(e.courses.price)}),(0,a.jsxs)(c.z,{variant:"ghost",size:"sm",onClick:()=>E(e.course_id),disabled:w===e.course_id,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),w===e.course_id?"Removing...":"Remove"]})]})]})]})},e.id))]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)(l.Zb,{className:"p-6 sticky top-8",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Order Summary"}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-gray-600",children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsxs)("span",{className:"font-semibold",children:["₹",(0,p.mE)(M).toLocaleString("en-IN")]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-gray-600",children:[(0,a.jsx)("span",{children:"Tax (18% GST)"}),(0,a.jsxs)("span",{className:"font-semibold",children:["₹",(0,p.mE)(.18*M).toLocaleString("en-IN")]})]}),(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-teal-600",children:["₹",(0,p.mE)(1.18*M).toLocaleString("en-IN")]})]})})]}),(0,a.jsxs)(c.z,{onClick:()=>{0!==t.length&&e.push("/checkout")},className:"w-full bg-teal-600 hover:bg-teal-700 text-lg py-6",disabled:0===t.length,children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),"Proceed to Checkout",(0,a.jsx)(h.Z,{className:"w-5 h-5 ml-2"})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-teal-50 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-sm text-teal-800",children:[(0,a.jsx)("strong",{children:"✓ Lifetime Access"})," - Purchase once, access forever"]}),(0,a.jsxs)("p",{className:"text-sm text-teal-800 mt-2",children:[(0,a.jsx)("strong",{children:"✓ Certificate"})," - Get certified upon completion"]})]})]})})]})}),(0,a.jsx)(i.nU,{value:"purchases",children:0===b.length?(0,a.jsxs)(l.Zb,{className:"p-12 text-center",children:[(0,a.jsx)(d.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No purchases yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Your purchased courses will appear here"}),(0,a.jsx)(c.z,{onClick:()=>e.push("/courses"),className:"bg-teal-600 hover:bg-teal-700",children:"Browse Courses"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:[b.length," ",1===b.length?"Purchase":"Purchases"]}),b.map(s=>(0,a.jsx)(l.Zb,{className:"p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-32 h-20 bg-gray-200 rounded-lg overflow-hidden relative",children:s.courses.thumbnail_url?(0,a.jsx)(g.default,{src:s.courses.thumbnail_url,alt:s.courses.title,fill:!0,className:"object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-teal-100 to-cyan-100",children:(0,a.jsx)(d.Z,{className:"w-8 h-8 text-teal-600"})})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:s.courses.title}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["by ",s.courses.instructor_name]}),(0,a.jsx)("span",{className:"px-2 py-1 bg-teal-100 text-teal-800 text-xs rounded",children:s.courses.category}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat("completed"===s.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:s.status})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-teal-600",children:(0,p.ML)(s.amount)}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Purchased on ",new Date(s.created_at).toLocaleDateString()]})]}),(0,a.jsxs)(c.z,{onClick:()=>e.push("/courses/".concat(s.course_id,"/learn")),className:"bg-teal-600 hover:bg-teal-700",children:["Continue Learning",(0,a.jsx)(h.Z,{className:"w-4 h-4 ml-2"})]})]})]})]})},s.id))]})})]})})]})}},2869:function(e,s,t){"use strict";t.d(s,{z:function(){return o}});var a=t(7437),r=t(2265),n=t(7053),l=t(535),c=t(4508);let i=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,s)=>{let{className:t,variant:r,size:l,asChild:o=!1,...d}=e,u=o?n.g7:"button";return(0,a.jsx)(u,{className:(0,c.cn)(i({variant:r,size:l,className:t})),ref:s,...d})});o.displayName="Button"},6070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return c},SZ:function(){return o},Zb:function(){return l},aY:function(){return d},ll:function(){return i}});var a=t(7437),r=t(2265),n=t(4508);let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});l.displayName="Card";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});c.displayName="CardHeader";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});i.displayName="CardTitle";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});o.displayName="CardDescription";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});d.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},2339:function(e,s,t){"use strict";t.d(s,{SP:function(){return o},dr:function(){return i},mQ:function(){return c},nU:function(){return d}});var a=t(7437),r=t(2265),n=t(7625),l=t(4508);let c=n.fC,i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.aV,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500",t),...r})});i.displayName=n.aV.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.xz,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-gray-900 data-[state=active]:shadow-sm",t),...r})});o.displayName=n.xz.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.VY,{ref:s,className:(0,l.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2",t),...r})});d.displayName=n.VY.displayName},9179:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return c},a:function(){return i}});var a=t(7437),r=t(2265),n=t(2141);let l=(0,r.createContext)({user:null,loading:!0,signOut:async()=>{}});function c(e){let{children:s}=e,[t,c]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{n.O.auth.getSession().then(e=>{var s;let{data:{session:t}}=e;c(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),o(!1)});let{data:{subscription:e}}=n.O.auth.onAuthStateChange((e,s)=>{var t;c(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),o(!1)});return()=>e.unsubscribe()},[]);let d=async()=>{await n.O.auth.signOut(),c(null)};return(0,a.jsx)(l.Provider,{value:{user:t,loading:i,signOut:d},children:s})}let i=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8574:function(e,s,t){"use strict";function a(e){return Math.round(83*e)}function r(e){var s;return s=a(e),"₹".concat(s.toLocaleString("en-IN"))}t.d(s,{ML:function(){return r},mE:function(){return a}})},2141:function(e,s,t){"use strict";t.d(s,{O:function(){return l}});var a=t(1545);let r="https://wbuvopdgcksviirckaur.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndidXZvcGRnY2tzdmlpcmNrYXVyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwMjMzMTIsImV4cCI6MjA3NTU5OTMxMn0.elWqpSmCfQ92fpepHoRU77O-x9nMvv8MXZyaV7dUV9s";if(!r||!n)throw Error("Missing Supabase environment variables");let l=(0,a.eI)(r,n)},4508:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var a=t(1994),r=t(3335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}}},function(e){e.O(0,[4609,8590,1545,7067,3039,1419,2971,2117,1744],function(){return e(e.s=6247)}),_N_E=e.O()}]);