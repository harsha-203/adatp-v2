(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1021],{9023:function(e,t,s){Promise.resolve().then(s.bind(s,4851))},4851:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var l=s(7437),n=s(2265),r=s(6070),a=s(9179),i=s(1769),c=s(1723),d=s(3327),u=s(1239),o=s(8896),x=s(9474),m=s(3464);let h=s(257).env.NEXT_PUBLIC_BACKEND_URL||"",f="".concat(h,"/api");function g(){var e,t,s;let{user:h}=(0,a.a)(),[g,v]=(0,n.useState)(null),[y,j]=(0,n.useState)(null),[p,b]=(0,n.useState)(!0);(0,n.useEffect)(()=>{h&&N()},[h]);let N=async()=>{try{let[e,t]=await Promise.all([m.Z.get("".concat(f,"/student/dashboard/summary?user_id=").concat(null==h?void 0:h.id)),m.Z.get("".concat(f,"/student/analytics?user_id=").concat(null==h?void 0:h.id))]);v(e.data),j(t.data)}catch(e){console.error("Error loading analytics:",e)}finally{b(!1)}};return p?(0,l.jsx)("div",{className:"p-8",children:"Loading..."}):(0,l.jsxs)("div",{className:"p-8 max-w-7xl mx-auto",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Your Analytics"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Track your learning progress and achievements"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Courses"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==g?void 0:g.total_courses)||0})]}),(0,l.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)(i.Z,{className:"w-6 h-6 text-blue-600"})})]})})}),(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Study Hours"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==g?void 0:g.total_study_hours)||0})]}),(0,l.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)(c.Z,{className:"w-6 h-6 text-orange-600"})})]})})}),(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Certificates"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==g?void 0:g.certificates_earned)||0})]}),(0,l.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)(d.Z,{className:"w-6 h-6 text-green-600"})})]})})}),(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Current Streak"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(null==g?void 0:g.current_streak)||0," days"]})]}),(0,l.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)(u.Z,{className:"w-6 h-6 text-purple-600"})})]})})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,l.jsx)(r.Zb,{children:(0,l.jsxs)(r.aY,{className:"p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Enrollment Trend"}),(0,l.jsx)("div",{className:"h-64 flex items-end justify-between gap-2",children:null==y?void 0:null===(e=y.enrollment_trend)||void 0===e?void 0:e.map((e,t)=>{let s=Math.max(...y.enrollment_trend.map(e=>e.enrollments)),n=e.enrollments/s*100;return(0,l.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,l.jsx)("div",{className:"flex-1 flex items-end w-full",children:(0,l.jsx)("div",{className:"w-full bg-teal-600 rounded-t transition-all hover:bg-teal-700",style:{height:"".concat(n,"%")},title:"".concat(e.enrollments," enrollments")})}),(0,l.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:e.month})]},t)})})]})}),(0,l.jsx)(r.Zb,{children:(0,l.jsxs)(r.aY,{className:"p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Course Categories"}),(0,l.jsx)("div",{className:"space-y-3",children:null==y?void 0:null===(t=y.category_distribution)||void 0===t?void 0:t.map((e,t)=>{let s=y.category_distribution.reduce((e,t)=>e+t.value,0),n=s>0?e.value/s*100:0,r=["bg-blue-600","bg-green-600","bg-orange-600","bg-purple-600","bg-pink-600"];return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,l.jsx)("span",{className:"text-gray-700",children:e.name}),(0,l.jsxs)("span",{className:"font-medium",children:[e.value," courses"]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"h-2 rounded-full ".concat(r[t%r.length]),style:{width:"".concat(n,"%")}})})]},t)})})]})})]}),(0,l.jsx)(r.Zb,{children:(0,l.jsxs)(r.aY,{className:"p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Learning Activity"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:null==y?void 0:null===(s=y.activity_distribution)||void 0===s?void 0:s.map((e,t)=>{let s=[i.Z,o.Z,x.Z],n=["bg-blue-100 text-blue-600","bg-green-100 text-green-600","bg-orange-100 text-orange-600"],r=s[t%s.length];return(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"w-16 h-16 ".concat(n[t%n.length]," rounded-lg flex items-center justify-center mx-auto mb-3"),children:(0,l.jsx)(r,{className:"w-8 h-8"})}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:e.count}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.type})]},t)})})]})})]})}},6070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return a},aY:function(){return u},ll:function(){return c}});var l=s(7437),n=s(2265),r=s(4508);let a=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});a.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...n})});i.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});c.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...n})});d.displayName="CardDescription";let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...n})});u.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter"},9179:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return i},a:function(){return c}});var l=s(7437),n=s(2265),r=s(2141);let a=(0,n.createContext)({user:null,loading:!0,signOut:async()=>{}});function i(e){let{children:t}=e,[s,i]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>{r.O.auth.getSession().then(e=>{var t;let{data:{session:s}}=e;i(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),d(!1)});let{data:{subscription:e}}=r.O.auth.onAuthStateChange((e,t)=>{var s;i(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),d(!1)});return()=>e.unsubscribe()},[]);let u=async()=>{await r.O.auth.signOut(),i(null)};return(0,l.jsx)(a.Provider,{value:{user:s,loading:c,signOut:u},children:t})}let c=()=>{let e=(0,n.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2141:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});var l=s(1545);let n="https://wbuvopdgcksviirckaur.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndidXZvcGRnY2tzdmlpcmNrYXVyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwMjMzMTIsImV4cCI6MjA3NTU5OTMxMn0.elWqpSmCfQ92fpepHoRU77O-x9nMvv8MXZyaV7dUV9s";if(!n||!r)throw Error("Missing Supabase environment variables");let a=(0,l.eI)(n,r)},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var l=s(1994),n=s(3335);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,l.W)(t))}},3327:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(9205).Z)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},1769:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(9205).Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(9205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},8896:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(9205).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},9474:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(9205).Z)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]])},1239:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(9205).Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])}},function(e){e.O(0,[4609,8590,1545,3464,2971,2117,1744],function(){return e(e.s=9023)}),_N_E=e.O()}]);